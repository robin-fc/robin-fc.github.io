"use strict";(self.webpackChunkrobin_fc_github_io=self.webpackChunkrobin_fc_github_io||[]).push([[8704],{511:(t,e,r)=>{r.d(e,{Cs:()=>p,It:()=>u,Lx:()=>s,Qg:()=>g,aQ:()=>l,br:()=>i,fk:()=>h,r2:()=>n,tM:()=>d,vY:()=>c,xk:()=>o});var a=r(7933);function o(){return"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"}function n(){return!!window.cast?.framework}function s(){return!!window.chrome?.cast?.isAvailable}function i(){return c().getCastState()===cast.framework.CastState.CONNECTED}function c(){return window.cast.framework.CastContext.getInstance()}function l(){return c().getCurrentSession()}function p(){return l()?.getSessionObj().media[0]}function g(t){const e=p()?.media.contentId;return e===t?.src}function h(){return{language:"en-US",autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,receiverApplicationId:chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,resumeSavedSession:!0,androidReceiverCompatible:!0}}function d(t){return`Google Cast Error Code: ${t}`}function u(t,e){return(0,a.k6)(c(),t,e)}},8704:(t,e,r)=>{r.r(e),r.d(e,{GoogleCastLoader:()=>i});var a=r(6207),o=r(4630),n=r(511),s=r(7933);class i{name="google-cast";target;#t;get cast(){return(0,n.vY)()}mediaType(){return"video"}canPlay(t){return a.G_&&!a.pz&&(0,a.jx)(t)}async prompt(t){let e,r,a;try{e=await this.#e(t),this.#t||(this.#t=new cast.framework.RemotePlayer,new cast.framework.RemotePlayerController(this.#t)),r=t.player.createEvent("google-cast-prompt-open",{trigger:e}),t.player.dispatchEvent(r),this.#r(t,"connecting",r),await this.#a((0,s.se)(t.$props.googleCast)),t.$state.remotePlaybackInfo.set({deviceName:(0,n.aQ)()?.getCastDevice().friendlyName}),(0,n.br)()&&this.#r(t,"connected",r)}catch(o){const s=o instanceof Error?o:this.#o((o+"").toUpperCase(),"Prompt failed.");throw a=t.player.createEvent("google-cast-prompt-error",{detail:s,trigger:r??e,cancelable:!0}),t.player.dispatch(a),this.#r(t,(0,n.br)()?"connected":"disconnected",a),s}finally{t.player.dispatch("google-cast-prompt-close",{trigger:a??r??e})}}async load(t){if(!this.#t)throw Error("[vidstack] google cast player was not initialized");return new((await r.e(3981).then(r.bind(r,3981))).GoogleCastProvider)(this.#t,t)}async#e(t){if((0,n.r2)())return;const e=t.player.createEvent("google-cast-load-start");t.player.dispatch(e),await(0,o.k0)((0,n.xk)()),await customElements.whenDefined("google-cast-launcher");const r=t.player.createEvent("google-cast-loaded",{trigger:e});if(t.player.dispatch(r),!(0,n.Lx)())throw this.#o("CAST_NOT_AVAILABLE","Google Cast not available on this platform.");return r}async#a(t){this.#n(t);const e=await this.cast.requestSession();if(e)throw this.#o(e.toUpperCase(),(0,n.tM)(e))}#n(t){this.cast?.setOptions({...(0,n.fk)(),...t})}#r(t,e,r){const a={type:"google-cast",state:e};t.notify("remote-playback-change",a,r)}#o(t,e){const r=Error(e);return r.code=t,r}}}}]);